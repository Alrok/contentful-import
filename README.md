# Contentful import tool

[![npm](https://img.shields.io/npm/v/contentful-import.svg)](https://www.npmjs.com/package/contentful-import)
[![Build Status](https://travis-ci.org/contentful/contentful-import.svg?branch=master)](https://travis-ci.org/contentful/contentful-import)
[![codecov](https://codecov.io/gh/contentful/contentful-import/branch/master/graph/badge.svg)](https://codecov.io/gh/contentful/contentful-import)
[![Dependency Status](https://img.shields.io/david/contentful/contentful-import.svg)](https://david-dm.org/contentful/contentful-import)
[![devDependency Status](https://img.shields.io/david/dev/contentful/contentful-import.svg)](https://david-dm.org/contentful/contentful-import#info=devDependencies)

[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release) [![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg)](http://standardjs.com/)

[Contentful](https://www.contentful.com) provides a content infrastructure for digital teams to power content in websites, apps, and devices. Unlike a CMS, Contentful was built to integrate with the modern software stack. It offers a central hub for structured content, powerful management and delivery APIs, and a customizable web app that enable developers and content creators to ship digital products faster.

This Command Line Tool (CLI) helps you to import files generated by [contentful-export](https://github.com/contentful/contentful-export) to a destination space.

## Installation

We recommend you install the CLI via npm:

```bash
npm install -g contentful-import
```

## Usage and examples

### Example

#### Import an environment

```
contentful-import --space-id <space-id>\
 --management-token <token>\
 --environment-id <environment-id>
```

### Usage as a library

You can also use it as a Node library

```javascript
let spaceImport = require('contentful-import')
let options = {
    content: {entries:..., contentTypes:..., locales:...},
    spaceId: 'SPACE_ID',
    managementToken: 'MANAGEMENT_TOKEN'
}
spaceImport(options)
.then((output) => {
  console.log('Data Imported successfully')
})
.catch((err) => {
  console.log('oh no! errors occurred!', err)
})
```

The `options` object can contain any of the CLI options, but written with a camelCase pattern instead and no dashes. For example `--space-id` would become `spaceId`.

## Importing to a space with existing content

- Both source space and destination space must share the same content model structure. In order to achieve that, please use the [migration-cli](https://www.npmjs.com/package/contentful-migration-cli).
- Content transformations are also not supported, please use the [migration-cli](https://www.npmjs.com/package/contentful-migration-cli).
- Entities existence are determined based on their ID:
  * If an entity does not exist in the destination space, it will be created.
  * If an entity already exists in the destination space, it will be updated.
- Publishing strategy:
  * If an entity is in draft, it will be created as draft in the destination space.
  * If an entity is published and has pending changes (updated) in the source space, it will be published with the latest changes in the destination space.

## Limitations

- This tool currently does **not** support the import of space memberships.
- This tool currently does **not** support the import of roles.
- This tool is expecting the target space to have the same default locale as your previously exported space.
- Imported webhooks with credentials will be imported as normal webhooks. Credentials should be added manually afterwards.
- If you have custom UI extensions, you need to reinstall them manually in the new space.

## Changelog

Read the [releases](https://github.com/contentful/contentful-import/releases) page for more information.

## License

This project is licensed under MIT license

[1]: https://www.contentful.com
